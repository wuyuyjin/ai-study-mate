# 标签页切换自动清空功能

## 🎯 功能描述

当用户在不同的输入模式之间切换时（文本输入、文件上传、网页链接），系统会自动清空当前显示的卡片内容和相关输入，避免内容混淆。

## ✨ 功能特性

### 自动清空内容
- **卡片内容**: 清空当前编辑的卡片和生成的卡片列表
- **输入状态**: 清空其他标签页的输入内容
- **编辑状态**: 重置编辑模式和选中的卡片索引

### 智能状态管理
- **文本输入模式**: 清空文件上传和URL输入
- **文件上传模式**: 清空文本输入和URL输入  
- **网页链接模式**: 清空文本输入和文件上传

### 用户友好提示
- 当有正在编辑的卡片时，显示友好的提示信息
- 告知用户内容已清空，需要重新生成

## 🔧 技术实现

### 核心函数
```typescript
const handleTabChange = (value: string) => {
  // 用户提示
  if (currentCard && isEditing) {
    toast({
      title: "已切换输入模式",
      description: "当前编辑的卡片已清空，请重新生成",
      variant: "default",
    })
  }
  
  // 清空卡片状态
  setCurrentCard(null)
  setGeneratedCards([])
  setIsEditing(false)
  setSelectedCardIndex(0)
  
  // 根据标签页清空相应输入
  if (value === "text") {
    setUploadedFile(null)
    setUrlInput("")
  } else if (value === "file") {
    setInputText("")
    setUrlInput("")
  } else if (value === "url") {
    setInputText("")
    setUploadedFile(null)
  }
  
  // 重置生成状态
  setIsGenerating(false)
}
```

### 组件集成
```typescript
<Tabs defaultValue="text" className="w-full" onValueChange={handleTabChange}>
  <TabsList className="grid w-full grid-cols-3">
    <TabsTrigger value="text">文本输入</TabsTrigger>
    <TabsTrigger value="file">文件上传</TabsTrigger>
    <TabsTrigger value="url">网页链接</TabsTrigger>
  </TabsList>
  {/* 标签页内容 */}
</Tabs>
```

## 📊 清空规则

| 切换到 | 清空的内容 | 保留的内容 |
|--------|------------|------------|
| 文本输入 | 上传的文件、URL输入、所有卡片 | 自定义标签、提取模式 |
| 文件上传 | 文本输入、URL输入、所有卡片 | 自定义标签、提取模式 |
| 网页链接 | 文本输入、上传的文件、所有卡片 | 自定义标签、提取模式 |

## 🎨 用户体验

### 操作流程
1. **用户在某个标签页生成了卡片**
2. **切换到其他标签页**
3. **系统自动清空卡片内容**
4. **显示友好提示（如果有正在编辑的卡片）**
5. **用户可以在新标签页重新开始**

### 提示信息
- **标题**: "已切换输入模式"
- **描述**: "当前编辑的卡片已清空，请重新生成"
- **类型**: 信息提示（非错误）

## 🔍 使用场景

### 场景1: 文本到文件
用户在文本输入模式生成了卡片，然后切换到文件上传模式：
- 清空文本输入框
- 清空生成的卡片
- 保留自定义标签和设置

### 场景2: 文件到URL
用户上传文件生成了卡片，然后切换到网页链接模式：
- 清空上传的文件
- 清空生成的卡片
- 保留自定义标签和设置

### 场景3: URL到文本
用户通过URL生成了卡片，然后切换到文本输入模式：
- 清空URL输入框
- 清空生成的卡片
- 保留自定义标签和设置

## ✅ 优势

### 避免混淆
- 防止不同来源的内容混合
- 确保每次生成的卡片来源明确
- 提供清晰的用户界面状态

### 提升体验
- 自动化的状态管理
- 减少用户手动清理的需要
- 友好的提示信息

### 数据一致性
- 确保输入和输出的对应关系
- 防止数据状态不一致
- 简化状态管理逻辑

## 🚀 实际效果

### 修改前
- 用户切换标签页时，之前的卡片内容仍然显示
- 可能导致用户混淆内容来源
- 需要手动清理或重新生成

### 修改后
- 切换标签页自动清空所有卡片内容
- 清晰的状态分离
- 友好的用户提示
- 更好的用户体验

这个功能确保了用户在不同输入模式之间切换时，始终有一个干净、清晰的界面状态，避免了内容混淆的问题。
